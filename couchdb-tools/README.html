<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.1//EN"
    "http://www.w3.org/TR/xhtml11/DTD/xhtml11.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />
<meta name="generator" content="AsciiDoc 8.2.7" />
<style type="text/css">
/* Debug borders */
p, li, dt, dd, div, pre, h1, h2, h3, h4, h5, h6 {
/*
  border: 1px solid red;
*/
}

body {
  margin: 1em 5% 1em 5%;
}

a {
  color: blue;
  text-decoration: underline;
}
a:visited {
  color: fuchsia;
}

em {
  font-style: italic;
  color: navy;
}

strong {
  font-weight: bold;
  color: #083194;
}

tt {
  color: navy;
}

h1, h2, h3, h4, h5, h6 {
  color: #527bbd;
  font-family: sans-serif;
  margin-top: 1.2em;
  margin-bottom: 0.5em;
  line-height: 1.3;
}

h1, h2, h3 {
  border-bottom: 2px solid silver;
}
h2 {
  padding-top: 0.5em;
}
h3 {
  float: left;
}
h3 + * {
  clear: left;
}

div.sectionbody {
  font-family: serif;
  margin-left: 0;
}

hr {
  border: 1px solid silver;
}

p {
  margin-top: 0.5em;
  margin-bottom: 0.5em;
}

ul, ol, li > p {
  margin-top: 0;
}

pre {
  padding: 0;
  margin: 0;
}

span#author {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  font-size: 1.1em;
}
span#email {
}
span#revision {
  font-family: sans-serif;
}

div#footer {
  font-family: sans-serif;
  font-size: small;
  border-top: 2px solid silver;
  padding-top: 0.5em;
  margin-top: 4.0em;
}
div#footer-text {
  float: left;
  padding-bottom: 0.5em;
}
div#footer-badges {
  float: right;
  padding-bottom: 0.5em;
}

div#preamble,
div.tableblock, div.imageblock, div.exampleblock, div.verseblock,
div.quoteblock, div.literalblock, div.listingblock, div.sidebarblock,
div.admonitionblock {
  margin-right: 10%;
  margin-top: 1.5em;
  margin-bottom: 1.5em;
}
div.admonitionblock {
  margin-top: 2.5em;
  margin-bottom: 2.5em;
}

div.content { /* Block element content. */
  padding: 0;
}

/* Block element titles. */
div.title, caption.title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  text-align: left;
  margin-top: 1.0em;
  margin-bottom: 0.5em;
}
div.title + * {
  margin-top: 0;
}

td div.title:first-child {
  margin-top: 0.0em;
}
div.content div.title:first-child {
  margin-top: 0.0em;
}
div.content + div.title {
  margin-top: 0.0em;
}

div.sidebarblock > div.content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}

div.listingblock {
  margin-right: 0%;
}
div.listingblock > div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock {
  padding-left: 2.0em;
}
div.quoteblock > div.attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock {
  padding-left: 2.0em;
}
div.verseblock > div.content {
  white-space: pre;
}
div.verseblock > div.attribution {
  padding-top: 0.75em;
  text-align: left;
}
/* DEPRECATED: Pre version 8.2.7 verse style literal block. */
div.verseblock + div.attribution {
  text-align: left;
}

div.admonitionblock .icon {
  vertical-align: top;
  font-size: 1.1em;
  font-weight: bold;
  text-decoration: underline;
  color: #527bbd;
  padding-right: 0.5em;
}
div.admonitionblock td.content {
  padding-left: 0.5em;
  border-left: 2px solid silver;
}

div.exampleblock > div.content {
  border-left: 2px solid silver;
  padding: 0.5em;
}

div.imageblock div.content { padding-left: 0; }
div.imageblock img { border: 1px solid silver; }
span.image img { border-style: none; }

dl {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
dt {
  margin-top: 0.5em;
  margin-bottom: 0;
  font-style: normal;
}
dd > *:first-child {
  margin-top: 0.1em;
}

ul, ol {
    list-style-position: outside;
}
div.olist > ol {
  list-style-type: decimal;
}
div.olist2 > ol {
  list-style-type: lower-alpha;
}

div.tableblock > table {
  border: 3px solid #527bbd;
}
thead {
  font-family: sans-serif;
  font-weight: bold;
}
tfoot {
  font-weight: bold;
}

div.hlist {
  margin-top: 0.8em;
  margin-bottom: 0.8em;
}
div.hlist td {
  padding-bottom: 15px;
}
td.hlist1 {
  vertical-align: top;
  font-style: normal;
  padding-right: 0.8em;
}
td.hlist2 {
  vertical-align: top;
}

@media print {
  div#footer-badges { display: none; }
}

div#toctitle {
  color: #527bbd;
  font-family: sans-serif;
  font-size: 1.1em;
  font-weight: bold;
  margin-top: 1.0em;
  margin-bottom: 0.1em;
}

div.toclevel1, div.toclevel2, div.toclevel3, div.toclevel4 {
  margin-top: 0;
  margin-bottom: 0;
}
div.toclevel2 {
  margin-left: 2em;
  font-size: 0.9em;
}
div.toclevel3 {
  margin-left: 4em;
  font-size: 0.9em;
}
div.toclevel4 {
  margin-left: 6em;
  font-size: 0.9em;
}
/* Workarounds for IE6's broken and incomplete CSS2. */

div.sidebar-content {
  background: #ffffee;
  border: 1px solid silver;
  padding: 0.5em;
}
div.sidebar-title, div.image-title {
  color: #527bbd;
  font-family: sans-serif;
  font-weight: bold;
  margin-top: 0.0em;
  margin-bottom: 0.5em;
}

div.listingblock div.content {
  border: 1px solid silver;
  background: #f4f4f4;
  padding: 0.5em;
}

div.quoteblock-attribution {
  padding-top: 0.5em;
  text-align: right;
}

div.verseblock-content {
  white-space: pre;
}
div.verseblock-attribution {
  padding-top: 0.75em;
  text-align: left;
}

div.exampleblock-content {
  border-left: 2px solid silver;
  padding-left: 0.5em;
}

/* IE6 sets dynamically generated links as visited. */
div#toc a:visited { color: blue; }

/* Because IE6 child selector is broken. */
div.olist2 ol {
  list-style-type: lower-alpha;
}
div.olist2 div.olist ol {
  list-style-type: decimal;
}
</style>
<title>moinz-couchdb command line tools</title>
</head>
<body>
<div id="header">
<h1>moinz-couchdb command line tools</h1>
</div>
<div id="preamble">
<div class="sectionbody">
<div class="para"><p>This describes the moinz-couchdb command line tools, to be exact couchdb-export.py and couchdb-import.py.</p></div>
<div class="para"><p>Common to both commands are the options <em>-s</em>/<em>&#8212;server</em> and <em>-p</em>/<em>&#8212;port</em> to specify the hostname and port of the couchdb server. By default the tools try to connect to <em>localhost:5984</em>. To change them, provide the new values via the options:</p></div>
<div class="literalblock">
<div class="content">
<pre><tt>couchdb-export.py --server=couchdb.acme.com --port 8080</tt></pre>
</div></div>
</div>
</div>
<h2 id="_exporting">Exporting</h2>
<div class="sectionbody">
<div class="para"><p>The command <em>couchdb-export.py</em> performs an export of all documents in all databases if not other specified. Currently you can give the names of databases as arguments, the documents are not filterable. The tool creates a subfolder under the target directory (<em>-d</em> or . by default) for every database and a <em><strong>id</strong>.json</em> file for each document.
The folders are created when necessary but not purged. You must do this yourself.</p></div>
<div class="admonitionblock">
<table><tr>
<td class="icon">
<div class="title">Note</div>
</td>
<td class="content">The document read from the server is written the file as received from the server except of the <em>_rev</em> field, which gets removed to make reimporting these data later easier.</td>
</tr></table>
</div>
</div>
<h2 id="_importing">Importing</h2>
<div class="sectionbody">
<div class="para"><p>The <em>couchdb-import.py</em> command works similar to the export command. You can specify a source directory with the <em>-d</em>/<em>&#8212;dir</em> where the tool looks at easch subfolder to import into a database. The name of the directory is used as the database name. If the database does not exists, it gets created. Each file is imported as a document. The id of the document is looked up from the content of the file. As all couchdb documents are dictionaries, the script checks for an <em>_id</em> field in the document.</p></div>
<div class="literalblock">
<div class="title">Example helloworld.json:</div>
<div class="content">
<pre><tt>{
  '_id' : 'hello',
  'text': 'Hello World!'
}</tt></pre>
</div></div>
<div class="para"><p>If no id is found in the document, the tool lets the server create an id for the document. If there is already a document with the given id, an error is raised and the document is skipped. If you want to overwrite these documents, specify the -f/&#8212;force option on the command line.</p></div>
</div>
<h2 id="_examples">Examples</h2>
<div class="sectionbody">
<div class="literalblock">
<div class="title">Exports all databases of the server</div>
<div class="content">
<pre><tt>&gt;&gt;&gt; couchdb-export.py --server=couchdb.local.net -p 8080 -d dump/</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">Export only the database mydatabase1 from localhost</div>
<div class="content">
<pre><tt>&gt;&gt;&gt; couchdb-export.py -d dump/ mydatabase1</tt></pre>
</div></div>
<div class="literalblock">
<div class="title">Import the documents from dump/mydatabase1/ and dump/mydatabase2/</div>
<div class="content">
<pre><tt>&gt;&gt;&gt; couchdb-import.py --server=couchdb.local.net -p 8080 -s dump/ -f mydatabase1 mydatabase2</tt></pre>
</div></div>
</div>
<h2 id="_license">License</h2>
<div class="sectionbody">
<div class="para"><p>GPLv2</p></div>
</div>
<div id="footer">
<div id="footer-text">
Last updated 2009-05-07 23:06:02 CEST
</div>
</div>
</body>
</html>
